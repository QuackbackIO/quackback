{
  "$schema": "node_modules/wrangler/config-schema.json",
  "name": "quackback-web",
  // Replace with your Cloudflare account ID
  "account_id": "YOUR_CLOUDFLARE_ACCOUNT_ID",
  "main": ".open-next/worker.js",
  "compatibility_date": "2024-09-23",
  "compatibility_flags": [
    "nodejs_compat_v2",
    "global_fetch_strictly_public"
  ],
  "assets": {
    "directory": ".open-next/assets",
    "binding": "ASSETS"
  },
  "observability": {
    "enabled": false,
    "logs": {
      "enabled": true,
      "persist": true,
      "invocation_logs": true
    }
  },
  // Custom domain routes - configure for your domain
  // The wildcard catches tenant subdomains
  "routes": [
    { "pattern": "your-domain.com/*", "zone_name": "your-domain.com" },
    { "pattern": "*.your-domain.com/*", "zone_name": "your-domain.com" }
  ],
  // Service binding for internal API calls (domain resolution)
  "services": [
    {
      "binding": "WORKER_SELF_REFERENCE",
      "service": "quackback-web"
    }
  ],
  // Hyperdrive PostgreSQL connection pooling
  // Create via: wrangler hyperdrive create quackback-db --connection-string="postgres://..."
  "hyperdrive": [
    {
      "binding": "HYPERDRIVE",
      "id": "YOUR_HYPERDRIVE_ID"
    }
  ],
  "vars": {
    // Edition: "cloud" for SaaS with billing, "oss" for self-hosted
    "EDITION": "cloud",
    // Production domain (without protocol)
    "APP_DOMAIN": "your-domain.com",
    // Auth URL (with protocol)
    "BETTER_AUTH_URL": "https://your-domain.com",
    // Email settings
    "EMAIL_FROM": "Quackback <noreply@your-domain.com>"
    // Add secrets via wrangler:
    // wrangler secret put RESEND_API_KEY
    // wrangler secret put BETTER_AUTH_SECRET
    // wrangler secret put STRIPE_SECRET_KEY (if EDITION=cloud)
  }
}
