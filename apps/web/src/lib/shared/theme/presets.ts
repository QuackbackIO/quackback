import type { ThemePreset } from './types'
import type { MinimalThemeVariables } from './expand'
import { expandTheme } from './expand'

const FONTS = {
  inter: '"Inter", ui-sans-serif, system-ui, sans-serif',
  system: 'ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, sans-serif',
  geist: '"Geist", ui-sans-serif, system-ui, sans-serif',
  jakarta: '"Plus Jakarta Sans", ui-sans-serif, system-ui, sans-serif',
  dmSans: '"DM Sans", ui-sans-serif, system-ui, sans-serif',
  nunito: '"Nunito", ui-sans-serif, system-ui, sans-serif',
  mono: 'ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace',
}

interface MinimalPresetConfig {
  name: string
  description: string
  color: string
  font: string
  radius: string
  light: Omit<MinimalThemeVariables, 'fontSans' | 'radius'>
  dark: Omit<MinimalThemeVariables, 'fontSans' | 'radius'>
}

function createPreset(config: MinimalPresetConfig): ThemePreset {
  const lightMinimal: MinimalThemeVariables = {
    ...config.light,
    fontSans: config.font,
    radius: config.radius,
  }

  const darkMinimal: MinimalThemeVariables = {
    ...config.dark,
    fontSans: config.font,
    radius: config.radius,
  }

  return {
    name: config.name,
    description: config.description,
    color: config.color,
    light: expandTheme(lightMinimal, { mode: 'light' }),
    dark: expandTheme(darkMinimal, { mode: 'dark' }),
  }
}

export const themePresets: Record<string, ThemePreset> = {
  default: createPreset({
    name: 'Default',
    description: 'Clean and professional',
    color: '#3b82f6',
    font: FONTS.inter,
    radius: '0.625rem',
    light: {
      primary: 'oklch(0.623 0.188 260)',
      background: 'oklch(1 0 0)',
      foreground: 'oklch(0.145 0 0)',
      card: 'oklch(1 0 0)',
      muted: 'oklch(0.97 0 0)',
      mutedForeground: 'oklch(0.556 0 0)',
      border: 'oklch(0.922 0 0)',
      destructive: 'oklch(0.577 0.245 27)',
      success: 'oklch(0.696 0.149 163)',
    },
    dark: {
      primary: 'oklch(0.623 0.188 260)',
      background: 'oklch(0.145 0 0)',
      foreground: 'oklch(0.985 0 0)',
      card: 'oklch(0.17 0 0)',
      muted: 'oklch(0.269 0 0)',
      mutedForeground: 'oklch(0.708 0 0)',
      border: 'oklch(0.269 0 0)',
      destructive: 'oklch(0.396 0.141 25)',
      success: 'oklch(0.696 0.149 163)',
    },
  }),

  minimal: createPreset({
    name: 'Minimal',
    description: 'Sharp and geometric',
    color: '#171717',
    font: FONTS.system,
    radius: '0rem',
    light: {
      primary: 'oklch(0.205 0 0)',
      background: 'oklch(1 0 0)',
      foreground: 'oklch(0.145 0 0)',
      card: 'oklch(1 0 0)',
      muted: 'oklch(0.97 0 0)',
      mutedForeground: 'oklch(0.556 0 0)',
      border: 'oklch(0.85 0 0)',
      destructive: 'oklch(0.577 0.245 27)',
      success: 'oklch(0.696 0.149 163)',
    },
    dark: {
      primary: 'oklch(0.985 0 0)',
      background: 'oklch(0.145 0 0)',
      foreground: 'oklch(0.985 0 0)',
      card: 'oklch(0.17 0 0)',
      muted: 'oklch(0.269 0 0)',
      mutedForeground: 'oklch(0.708 0 0)',
      border: 'oklch(0.269 0 0)',
      destructive: 'oklch(0.396 0.141 25)',
      success: 'oklch(0.696 0.149 163)',
    },
  }),

  playful: createPreset({
    name: 'Playful',
    description: 'Vibrant & friendly',
    color: '#f43f5e',
    font: FONTS.nunito,
    radius: '1rem',
    light: {
      primary: 'oklch(0.645 0.215 16)',
      background: 'oklch(0.995 0.003 350)',
      foreground: 'oklch(0.145 0 0)',
      card: 'oklch(1 0 0)',
      muted: 'oklch(0.97 0.008 350)',
      mutedForeground: 'oklch(0.556 0 0)',
      border: 'oklch(0.922 0 0)',
      destructive: 'oklch(0.577 0.245 27)',
      success: 'oklch(0.696 0.149 163)',
    },
    dark: {
      primary: 'oklch(0.7 0.2 16)',
      background: 'oklch(0.145 0 0)',
      foreground: 'oklch(0.985 0 0)',
      card: 'oklch(0.17 0 0)',
      muted: 'oklch(0.269 0 0)',
      mutedForeground: 'oklch(0.708 0 0)',
      border: 'oklch(0.269 0 0)',
      destructive: 'oklch(0.396 0.141 25)',
      success: 'oklch(0.696 0.149 163)',
    },
  }),

  editorial: createPreset({
    name: 'Editorial',
    description: 'Refined & classic',
    color: '#374151',
    font: '"Merriweather", ui-serif, Georgia, serif',
    radius: '0.25rem',
    light: {
      primary: 'oklch(0.373 0.034 259)',
      background: 'oklch(0.99 0.005 85)',
      foreground: 'oklch(0.2 0.01 50)',
      card: 'oklch(0.995 0.003 85)',
      muted: 'oklch(0.96 0.008 85)',
      mutedForeground: 'oklch(0.45 0.02 50)',
      border: 'oklch(0.88 0.01 85)',
      destructive: 'oklch(0.577 0.245 27)',
      success: 'oklch(0.696 0.149 163)',
    },
    dark: {
      primary: 'oklch(0.65 0.05 259)',
      background: 'oklch(0.15 0.01 50)',
      foreground: 'oklch(0.92 0.008 85)',
      card: 'oklch(0.18 0.012 50)',
      muted: 'oklch(0.25 0.015 50)',
      mutedForeground: 'oklch(0.6 0.015 85)',
      border: 'oklch(0.28 0.012 50)',
      destructive: 'oklch(0.396 0.141 25)',
      success: 'oklch(0.696 0.149 163)',
    },
  }),

  tech: createPreset({
    name: 'Tech',
    description: 'Modern & precise',
    color: '#06b6d4',
    font: '"JetBrains Mono", ui-monospace, monospace',
    radius: '0.375rem',
    light: {
      primary: 'oklch(0.715 0.126 195)',
      background: 'oklch(0.99 0 0)',
      foreground: 'oklch(0.15 0 0)',
      card: 'oklch(1 0 0)',
      muted: 'oklch(0.97 0 0)',
      mutedForeground: 'oklch(0.556 0 0)',
      border: 'oklch(0.88 0 0)',
      destructive: 'oklch(0.577 0.245 27)',
      success: 'oklch(0.696 0.149 163)',
    },
    dark: {
      primary: 'oklch(0.75 0.14 195)',
      background: 'oklch(0.12 0 0)',
      foreground: 'oklch(0.9 0 0)',
      card: 'oklch(0.16 0 0)',
      muted: 'oklch(0.22 0 0)',
      mutedForeground: 'oklch(0.6 0 0)',
      border: 'oklch(0.25 0 0)',
      destructive: 'oklch(0.396 0.141 25)',
      success: 'oklch(0.696 0.149 163)',
    },
  }),

  cozy: createPreset({
    name: 'Cozy',
    description: 'Soft & warm',
    color: '#c4a7e7',
    font: FONTS.dmSans,
    radius: '0.75rem',
    light: {
      primary: 'oklch(0.68 0.12 300)',
      background: 'oklch(0.98 0.008 300)',
      foreground: 'oklch(0.25 0.02 280)',
      card: 'oklch(0.99 0.005 300)',
      muted: 'oklch(0.94 0.012 300)',
      mutedForeground: 'oklch(0.5 0.03 280)',
      border: 'oklch(0.9 0.015 300)',
      destructive: 'oklch(0.577 0.245 27)',
      success: 'oklch(0.696 0.149 163)',
    },
    dark: {
      primary: 'oklch(0.75 0.12 300)',
      background: 'oklch(0.2 0.02 280)',
      foreground: 'oklch(0.92 0.015 300)',
      card: 'oklch(0.24 0.022 280)',
      muted: 'oklch(0.3 0.025 280)',
      mutedForeground: 'oklch(0.65 0.025 300)',
      border: 'oklch(0.33 0.025 280)',
      destructive: 'oklch(0.396 0.141 25)',
      success: 'oklch(0.696 0.149 163)',
    },
  }),

  // Legacy presets (kept for backward compatibility)
  emerald: createPreset({
    name: 'Emerald',
    description: 'Fresh and natural',
    color: '#10b981',
    font: FONTS.jakarta,
    radius: '0.75rem',
    light: {
      primary: 'oklch(0.696 0.149 163)',
      background: 'oklch(1 0 0)',
      foreground: 'oklch(0.145 0 0)',
      card: 'oklch(1 0 0)',
      muted: 'oklch(0.97 0 0)',
      mutedForeground: 'oklch(0.556 0 0)',
      border: 'oklch(0.922 0 0)',
      destructive: 'oklch(0.577 0.245 27)',
      success: 'oklch(0.696 0.149 163)',
    },
    dark: {
      primary: 'oklch(0.696 0.149 163)',
      background: 'oklch(0.145 0 0)',
      foreground: 'oklch(0.985 0 0)',
      card: 'oklch(0.17 0 0)',
      muted: 'oklch(0.269 0 0)',
      mutedForeground: 'oklch(0.708 0 0)',
      border: 'oklch(0.269 0 0)',
      destructive: 'oklch(0.396 0.141 25)',
      success: 'oklch(0.696 0.149 163)',
    },
  }),

  rose: createPreset({
    name: 'Rose',
    description: 'Soft and friendly',
    color: '#f43f5e',
    font: FONTS.dmSans,
    radius: '1rem',
    light: {
      primary: 'oklch(0.645 0.215 16)',
      background: 'oklch(1 0 0)',
      foreground: 'oklch(0.145 0 0)',
      card: 'oklch(1 0 0)',
      muted: 'oklch(0.975 0.005 16)',
      mutedForeground: 'oklch(0.556 0 0)',
      border: 'oklch(0.922 0 0)',
      destructive: 'oklch(0.577 0.245 27)',
      success: 'oklch(0.696 0.149 163)',
    },
    dark: {
      primary: 'oklch(0.645 0.215 16)',
      background: 'oklch(0.145 0 0)',
      foreground: 'oklch(0.985 0 0)',
      card: 'oklch(0.17 0 0)',
      muted: 'oklch(0.269 0 0)',
      mutedForeground: 'oklch(0.708 0 0)',
      border: 'oklch(0.269 0 0)',
      destructive: 'oklch(0.396 0.141 25)',
      success: 'oklch(0.696 0.149 163)',
    },
  }),

  amber: createPreset({
    name: 'Amber',
    description: 'Warm and energetic',
    color: '#f59e0b',
    font: FONTS.inter,
    radius: '0.5rem',
    light: {
      primary: 'oklch(0.769 0.165 70)',
      background: 'oklch(1 0 0)',
      foreground: 'oklch(0.145 0 0)',
      card: 'oklch(1 0 0)',
      muted: 'oklch(0.97 0 0)',
      mutedForeground: 'oklch(0.556 0 0)',
      border: 'oklch(0.922 0 0)',
      destructive: 'oklch(0.577 0.245 27)',
      success: 'oklch(0.696 0.149 163)',
    },
    dark: {
      primary: 'oklch(0.769 0.165 70)',
      background: 'oklch(0.145 0 0)',
      foreground: 'oklch(0.985 0 0)',
      card: 'oklch(0.17 0 0)',
      muted: 'oklch(0.269 0 0)',
      mutedForeground: 'oklch(0.708 0 0)',
      border: 'oklch(0.269 0 0)',
      destructive: 'oklch(0.396 0.141 25)',
      success: 'oklch(0.696 0.149 163)',
    },
  }),

  violet: createPreset({
    name: 'Violet',
    description: 'Creative and modern',
    color: '#8b5cf6',
    font: FONTS.geist,
    radius: '0.625rem',
    light: {
      primary: 'oklch(0.606 0.219 293)',
      background: 'oklch(1 0 0)',
      foreground: 'oklch(0.145 0 0)',
      card: 'oklch(1 0 0)',
      muted: 'oklch(0.97 0 0)',
      mutedForeground: 'oklch(0.556 0 0)',
      border: 'oklch(0.922 0 0)',
      destructive: 'oklch(0.577 0.245 27)',
      success: 'oklch(0.696 0.149 163)',
    },
    dark: {
      primary: 'oklch(0.606 0.219 293)',
      background: 'oklch(0.145 0 0)',
      foreground: 'oklch(0.985 0 0)',
      card: 'oklch(0.17 0 0)',
      muted: 'oklch(0.269 0 0)',
      mutedForeground: 'oklch(0.708 0 0)',
      border: 'oklch(0.269 0 0)',
      destructive: 'oklch(0.396 0.141 25)',
      success: 'oklch(0.696 0.149 163)',
    },
  }),

  catppuccin: createPreset({
    name: 'Catppuccin',
    description: 'Pastel and cozy',
    color: '#cba6f7',
    font: FONTS.nunito,
    radius: '0.75rem',
    light: {
      primary: 'oklch(0.711 0.106 313)',
      background: 'oklch(0.97 0.003 290)',
      foreground: 'oklch(0.145 0 0)',
      card: 'oklch(0.985 0.002 290)',
      muted: 'oklch(0.94 0.005 290)',
      mutedForeground: 'oklch(0.556 0 0)',
      border: 'oklch(0.9 0.008 290)',
      destructive: 'oklch(0.577 0.245 27)',
      success: 'oklch(0.696 0.149 163)',
    },
    dark: {
      primary: 'oklch(0.711 0.106 313)',
      background: 'oklch(0.22 0.015 290)',
      foreground: 'oklch(0.93 0.01 290)',
      card: 'oklch(0.26 0.018 290)',
      muted: 'oklch(0.32 0.02 290)',
      mutedForeground: 'oklch(0.7 0.02 290)',
      border: 'oklch(0.35 0.02 290)',
      destructive: 'oklch(0.396 0.141 25)',
      success: 'oklch(0.696 0.149 163)',
    },
  }),

  cyberpunk: createPreset({
    name: 'Cyberpunk',
    description: 'Neon and bold',
    color: '#ff00ff',
    font: FONTS.mono,
    radius: '0rem',
    light: {
      primary: 'oklch(0.7 0.3 328)',
      background: 'oklch(0.98 0 0)',
      foreground: 'oklch(0.145 0 0)',
      card: 'oklch(1 0 0)',
      muted: 'oklch(0.97 0 0)',
      mutedForeground: 'oklch(0.556 0 0)',
      border: 'oklch(0.8 0.05 328)',
      destructive: 'oklch(0.577 0.245 27)',
      success: 'oklch(0.696 0.149 163)',
    },
    dark: {
      primary: 'oklch(0.8 0.3 328)',
      background: 'oklch(0.1 0.02 280)',
      foreground: 'oklch(0.95 0.02 195)',
      card: 'oklch(0.15 0.025 280)',
      muted: 'oklch(0.2 0.03 280)',
      mutedForeground: 'oklch(0.6 0.05 195)',
      border: 'oklch(0.3 0.05 328)',
      destructive: 'oklch(0.396 0.141 25)',
      success: 'oklch(0.696 0.149 163)',
    },
  }),

  claude: createPreset({
    name: 'Claude',
    description: 'Warm earth tones',
    color: '#c96442',
    font: FONTS.inter,
    radius: '0.5rem',
    light: {
      primary: 'oklch(0.637 0.137 29)',
      background: 'oklch(0.985 0.01 85)',
      foreground: 'oklch(0.25 0.02 50)',
      card: 'oklch(0.99 0.008 85)',
      muted: 'oklch(0.95 0.015 85)',
      mutedForeground: 'oklch(0.5 0.03 50)',
      border: 'oklch(0.9 0.02 85)',
      destructive: 'oklch(0.577 0.245 27)',
      success: 'oklch(0.696 0.149 163)',
    },
    dark: {
      primary: 'oklch(0.7 0.137 29)',
      background: 'oklch(0.18 0.015 50)',
      foreground: 'oklch(0.95 0.01 85)',
      card: 'oklch(0.22 0.018 50)',
      muted: 'oklch(0.28 0.02 50)',
      mutedForeground: 'oklch(0.65 0.02 85)',
      border: 'oklch(0.32 0.02 50)',
      destructive: 'oklch(0.396 0.141 25)',
      success: 'oklch(0.696 0.149 163)',
    },
  }),

  ocean: createPreset({
    name: 'Ocean',
    description: 'Deep and calming',
    color: '#0891b2',
    font: FONTS.nunito,
    radius: '0.875rem',
    light: {
      primary: 'oklch(0.609 0.126 221)',
      background: 'oklch(0.99 0.005 220)',
      foreground: 'oklch(0.145 0 0)',
      card: 'oklch(1 0 0)',
      muted: 'oklch(0.96 0.008 220)',
      mutedForeground: 'oklch(0.556 0 0)',
      border: 'oklch(0.92 0.01 220)',
      destructive: 'oklch(0.577 0.245 27)',
      success: 'oklch(0.696 0.149 163)',
    },
    dark: {
      primary: 'oklch(0.7 0.126 221)',
      background: 'oklch(0.15 0.02 230)',
      foreground: 'oklch(0.95 0.01 220)',
      card: 'oklch(0.19 0.025 230)',
      muted: 'oklch(0.25 0.03 230)',
      mutedForeground: 'oklch(0.65 0.03 220)',
      border: 'oklch(0.3 0.03 230)',
      destructive: 'oklch(0.396 0.141 25)',
      success: 'oklch(0.696 0.149 163)',
    },
  }),

  indigo: createPreset({
    name: 'Indigo',
    description: 'Deep and focused',
    color: '#6366f1',
    font: FONTS.inter,
    radius: '0.625rem',
    light: {
      primary: 'oklch(0.585 0.204 277)',
      background: 'oklch(1 0 0)',
      foreground: 'oklch(0.145 0 0)',
      card: 'oklch(1 0 0)',
      muted: 'oklch(0.97 0 0)',
      mutedForeground: 'oklch(0.556 0 0)',
      border: 'oklch(0.922 0 0)',
      destructive: 'oklch(0.577 0.245 27)',
      success: 'oklch(0.696 0.149 163)',
    },
    dark: {
      primary: 'oklch(0.585 0.204 277)',
      background: 'oklch(0.145 0 0)',
      foreground: 'oklch(0.985 0 0)',
      card: 'oklch(0.17 0 0)',
      muted: 'oklch(0.269 0 0)',
      mutedForeground: 'oklch(0.708 0 0)',
      border: 'oklch(0.269 0 0)',
      destructive: 'oklch(0.396 0.141 25)',
      success: 'oklch(0.696 0.149 163)',
    },
  }),

  cyan: createPreset({
    name: 'Cyan',
    description: 'Bright and fresh',
    color: '#06b6d4',
    font: FONTS.inter,
    radius: '0.625rem',
    light: {
      primary: 'oklch(0.715 0.126 215)',
      background: 'oklch(1 0 0)',
      foreground: 'oklch(0.145 0 0)',
      card: 'oklch(1 0 0)',
      muted: 'oklch(0.97 0 0)',
      mutedForeground: 'oklch(0.556 0 0)',
      border: 'oklch(0.922 0 0)',
      destructive: 'oklch(0.577 0.245 27)',
      success: 'oklch(0.696 0.149 163)',
    },
    dark: {
      primary: 'oklch(0.715 0.126 215)',
      background: 'oklch(0.145 0 0)',
      foreground: 'oklch(0.985 0 0)',
      card: 'oklch(0.17 0 0)',
      muted: 'oklch(0.269 0 0)',
      mutedForeground: 'oklch(0.708 0 0)',
      border: 'oklch(0.269 0 0)',
      destructive: 'oklch(0.396 0.141 25)',
      success: 'oklch(0.696 0.149 163)',
    },
  }),
}

export const presetNames = Object.keys(themePresets) as Array<keyof typeof themePresets>

export function getPreset(name: string): ThemePreset | undefined {
  return themePresets[name]
}

export const primaryPresetIds = [
  'default',
  'minimal',
  'playful',
  'editorial',
  'tech',
  'cozy',
] as const
